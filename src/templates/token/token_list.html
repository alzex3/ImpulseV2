{% extends "base.html" %}


{% block content %}
    <body>
    <div class="flex flex-col align-items-start pb-5">
        <button id="createToken" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
            Создать новый Токен
        </button>


    </div>
    {#    <div class="p-6 max-w-sm mx-auto bg-white rounded-xl shadow-md flex-wrap items-center space-x-4">#}
    <div class="text-xl font-medium text-black">Список токенов</div>
    <div class="flex flex-wrap">

        {% for token in tokens %}


            <div class="m-2 p-6 max-w-sm mx-2 bg-white rounded-xl shadow-md flex-wrap items-center space-x-4">
                <a class="text-gray-500"
                   href="{{ url_for('token_detail', token_id=token.id) }}">Инфо</a>
                <p class="text-gray-500">{{ token.id }}</p>
                <p class="text-gray-500">{{ token.isActive }}</p>
                <p class="text-gray-500" type="date">Дата
                    создания: {{ token.createdAt.strftime('%Y-%m-%d в %H:%M') }}</p>

            </div>

        {% endfor %}
    </div>

    <script>
        document.getElementById('createToken').addEventListener('click', function () {
            this.disabled = true;
            fetch('http://127.0.0.1:8000/token/create/', { // Замените на ваш URL-адрес FastAPI
                method: 'POST',
                credentials: 'include',
                headers: {
                    'Content-Type': 'application/json',

                },
            })
                .then(response => response.json())
                .then(data => {
                    // Обработка полученных данных
                    console.log(data);

                    // Скрыть индикатор загрузки
                    this.disabled = false;
                    location.reload();
                })
                .catch(error => {
                    console.error('Ошибка загрузки данных:', error);
                    // Скрыть индикатор загрузки в случае ошибки
                    this.disabled = false;
                });
        });
    </script>
    {#    <div class="flex flex-wrap">#}
    {#        <div class="m-2">Элемент 1</div>#}
    {#        <div class="m-2">Элемент 2</div>#}
    {#        <div class="m-2">Элемент 3</div>#}
    {#        <div class="m-2">Элемент 4</div>#}
    {#        <div class="m-2">Элемент 5</div>#}
    {#    </div>#}
    </body>
{% endblock %}